/**
 * Generated by Gas3 v3.1.0 (Granite Data Services).
 *
 * NOTE: this file is only generated if it does not exist. You may safely put
 * your custom code here.
 */

package com.photodispatcher.model.mysql.entities {
	import flash.globalization.DateTimeStyle;
	
	import mx.collections.ArrayList;
	import mx.collections.IList;
	
	import org.granite.reflect.Field;
	import org.granite.reflect.Type;
	
	import spark.components.gridClasses.GridColumn;
	import spark.formatters.DateTimeFormatter;

    [Bindable]
    [RemoteClass(alias="com.photodispatcher.model.mysql.entities.MailPackageBox")]
    public class MailPackageBox extends MailPackageBoxBase {

        public function MailPackageBox() {
            super();
        }
		
		public var srcState:int;
		
		public function clone():MailPackageBox{
			var b:MailPackageBox= new MailPackageBox();
			var type:Type= Type.forClass(MailPackageBox);
			var props:Array=type.properties;
			if(!props || props.length==0) return b;
			var prop:Field;
			for each(prop in props){
				//exclude childs
				if(this[prop.name] && !(this[prop.name] is IList)) b[prop.name]=this[prop.name];
			}
			return b;
		}
		
		public function nativeIdFromId():int{
			if(!boxID) return 0;
			var arr:Array;
			
			arr=boxID.split('-');
			if(arr && arr.length>1){
				return int(arr[1]);
			}
			return 0;
		}

		public function nativeState():int{
			var res:int=0;
			switch (state){
				case OrderState.PACKAGE_PACKED:
					res = 40;
					break;
				case OrderState.PACKAGE_SEND:
					res = 42;
					break;
			}
			return res;
		}


		public static function columns():ArrayList{
			var result:ArrayList= new ArrayList();
			
			var col:GridColumn;
			col= new GridColumn('source_name'); col.headerText='Источник'; result.addItem(col);
			col= new GridColumn('source_code'); col.headerText='Код'; col.width=25; result.addItem(col); 
			col= new GridColumn('packageID'); col.headerText='Группа'; result.addItem(col); 
			col= new GridColumn('boxNum'); col.headerText='№ коробки'; result.addItem(col); 
			col= new GridColumn('barcode'); col.headerText='Штрихкод'; result.addItem(col); 
			col= new GridColumn('state_name'); col.headerText='Cтатус'; result.addItem(col); 
			var fmt:DateTimeFormatter=new DateTimeFormatter(); fmt.dateStyle=fmt.timeStyle=DateTimeStyle.SHORT; 
			col= new GridColumn('state_date'); col.headerText='Дата статуса'; col.formatter=fmt;  result.addItem(col);
			return result;
		}

    }
}